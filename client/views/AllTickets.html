<div class="container-fluid">
    <div class="block-header">
        <div class="row">
            <div class="col-lg-6 col-md-8 col-lg-12">

              

              
            </div>
        </div>
    </div>
    <div class="block-header">
        <div class="row">
            <div class="col-lg-6 col-md-8 col-lg-12">

                <ul class="breadcrumb adv_search">
                    <!--<li class="breadcrumb-item"><a href="index.html"><i class="icon-home"></i></a></li>-->
                    <li class="breadcrumb-item active">All Tickets</li>
                </ul>

                <div class="col-lg-6 hidden-sm text-right switch_btns">
                    <select ng-show="ActiveSearchType==2" ng-model="Selected.CountIssueType" ng-change="GetDashboardCount()"
                            ng-options="data.ISSUENAME for data in IssueSubIssue
                                    |  unique: 'ISSUEID' | orderBy:['SUBISSUENAME'] track by data.ISSUEID ">
                        <option value="">All Issue</option>
                    </select>
                    <a href="javascript:void(0);" ng-click="ActiveSearch(1)" class="btn btn-sm btn-outline-info">Search</a>
                    <a href="javascript:void(0);" ng-click="ActiveSearch(2)" class="btn btn-sm btn-outline-secondary">Dashboard</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row clearfix" ng-show="ActiveSearchType==2">
       
        <div class="col-lg-3 col-md-9 col-lg-12 tkt_listing5">
            <div class="card text-center bg-info new">
                <div class="body">
                    <div class="p-15 text-light" ng-click="GetAdminTicketList(1)">
                        <h3>{{TicketCount[0].NEWCASE?TicketCount[0].NEWCASE:0}}</h3>
                        <span>New</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-9 col-lg-12 tkt_listing5">
            <div class="card text-center bg-secondary open">
                <div class="body">
                    <div class="p-15 text-light" ng-click="GetAdminTicketList(2)">
                        <h3>{{TicketCount[0].OPENCASE?TicketCount[0].OPENCASE:0}}</h3>
                        <span>Open</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-9 col-lg-12 tkt_listing5">
            <div class="card text-center bg-warning tatbust">
                <div class="body">
                    <div class="p-15 text-light" ng-click="GetAdminTicketList(5)">
                        <h3>{{TicketCount[0].TATCASE?TicketCount[0].TATCASE:0}}</h3>
                        <span>TAT Bust</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-9 col-lg-12 tkt_listing5">
            <div class="card text-center bg-warning tatbust">
                <div class="body">
                    <div class="p-15 text-light" ng-click="GetAdminTicketList(4)">
                        <h3>{{TicketCount[0].Resolved?TicketCount[0].Resolved:0}}</h3>
                        <span>Resolved</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-9 col-lg-12 tkt_listing5">
            <div class="card text-center bg-warning tatbust">
                <div class="body">
                    <div class="p-15 text-light" ng-click="GetAdminTicketList(3)">
                        <h3>{{TicketCount[0].Closed?TicketCount[0].Closed:0}}</h3>
                        <span>Closed</span>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="row clearfix" ng-show="ActiveSearchType==1">
        <div class="col-md-12">
            <div class="card">

                <div class="body">
                    <div class="row clearfix">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label>From</label>
                                <div class="date_block">
                                    <input type="text" class="form-control cal" uib-datepicker-popup="{{format}}"
                                           ng-model="FromDate" is-open="popup1.opened"
                                           datepicker-options="dateOptions" ng-click="open1()"
                                           ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label>To</label>
                                <div class="date_block">
                                    <input type="text" class="form-control cal" uib-datepicker-popup="{{format}}"
                                           ng-model="ToDate" is-open="popup2.opened"
                                           datepicker-options="dateOptions" ng-click="open2()"
                                           ng-required="true" close-text="Close" alt-input-formats="altInputFormats" />
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label for="phone-ex" class="control-label">Issue</label>
                                <select class="form-control" ng-model="Selected.IssueType"
                                        ng-options="data.ISSUENAME for data in IssueSubIssue
                                    |  unique: 'ISSUEID' | orderBy:['SUBISSUENAME'] track by data.ISSUEID ">
                                    <option value="">Select Issue</option>
                                </select>

                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label for="tax-id" class="control-label">SubIssue</label>
                                <select class="form-control" ng-model="Selected.SubIssueType"
                                        ng-options="data.SUBISSUENAME for data in IssueSubIssue
                                    | filter : {IsVisible:1}:true | filter : {ISSUEID:Selected.IssueType.ISSUEID}:true | orderBy:['SUBISSUENAME']  track by data.SUBISSUEID" ng-disabled="!(Selected.IssueType.ISSUEID>0)">
                                    <option value="">Select Sub Issue</option>
                                </select>
                            </div>
                        </div>

                    </div>
                    <div class="row clearfix">
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label for="tax-id" class="control-label">Status</label>
                                <select class="form-control" ng-model="Selected.Status"
                                        ng-options="data.StatusName for data in StatusList
                                    |  unique: 'StatusID' | orderBy:['Sequence'] track by data.StatusID ">
                                    <option value="">Select Status</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="form-group grp1">
                                <label for="product-key" class="control-label">Ticket ID</label>
                                <input type="text" id="product-key" class="form-control" ng-model="TicketID">
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
                            <div class="m-t-15 advance_search_btn">
                                <button class="btn btn-primary" ng-click="GetAdminTicketList(8)">Search</button>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row clearfix">
        <div class="col-md-12">
            <a ng-show="TicketList.length>0" href="javascript:void(0);" class="btn btn-info" data-toggle="modal" ng-click="exportData()">Export Data</a>
            <div class="card">

                <div class="body">
                    <div class="table-responsive">
                        <table class="table table-hover table-striped" ng-show="TicketList.length>0" ts-wrapper>
                            <thead class="thead-dark">
                                <tr class="sortable">
                                    <th><a ng-click="sortData('TicketDispID')" href="javascript:void(0)">Ticket Id</a></th>
                                    <th><a ng-click="sortData('EmployeeID')" href="javascript:void(0)">Emp ID</a></th>
                                    <th><a ng-click="sortData('Name')" href="javascript:void(0)">Emp Name</a></th>
                                    <th><a ng-click="sortData('Building')" href="javascript:void(0)">Building</a></th>
                                    <th><a ng-click="sortData('Floor')" href="javascript:void(0)">Floor</a></th>
                                    <th><a ng-click="sortData('AssignName')" href="javascript:void(0)">AssignTo</a></th>
                                    <th><a ng-click="sortData('TATDate')" href="javascript:void(0)">TAT</a></th>
                                    <th><a ng-click="sortData('CreatedON')" href="javascript:void(0)">Created On</a></th>
                                    <th><a ng-click="sortData('ISSUENAME')" href="javascript:void(0)">Issue</a></th>
                                    <th><a ng-click="sortData('SUBISSUENAME')" href="javascript:void(0)">Sub Issue</a></th>
                                    <th><a ng-click="sortData('StatusName')" href="javascript:void(0)">Status</a></th>
                                    <th><a ng-click="sortData('LastUpdatedOn')" href="javascript:void(0)">Updated On</a></th>
                                    <th><a ng-click="sortData('FollowUp')" href="javascript:void(0)">FollowUp</a></th>
                                </tr>
                            </thead>

                            <tbody>

                                <tr ng-repeat="data in TicketList | orderBy : sortColumn : reverseSort">
                                    <td><a class="btn btn-link mybtn-link" href="home.html#/pbsupport/TicketDetails/{{data.TicketID}}">{{data.TicketDispID}}</a></td>
                                    <td>{{data.EmployeeID}}</td>
                                    <td>{{data.Name}}</td>
                                    <td>{{data.Building}}</td>
                                    <td>{{data.Floor}}</td>
                                    <td>{{data.AssignName}}({{data.AssignToEID}})</td>
                                    <td>{{data.TATDate | date:"dd-MM-yyyy  h:mma"}}</td>
                                    <td>{{data.CreatedON | date:"dd-MM-yyyy  h:mma"}}</td>
                                    <td>{{data.ISSUENAME}}</td>
                                    <td>{{data.SUBISSUENAME}}</td>
                                    <td>{{data.StatusName}}</td>
                                    <td>{{data.LastUpdatedOn | date:"dd-MM-yyyy  h:mma"}}</td>
                                    <td>{{data.FollowUp && data.FollowUp!=null ? (data.FollowUp | date:"dd-MM-yyyy"):''}}</td>
                                </tr>



                            </tbody>
                        </table>
                        <div ng-show="!TicketList  || TicketList.length<=0">No record found</div>
                    </div>
                </div>

            </div>
        </div>
    </div>


</div>


